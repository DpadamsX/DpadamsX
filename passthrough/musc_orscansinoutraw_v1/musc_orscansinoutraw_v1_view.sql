-- This view is selected in the 'musc_orscansinoutraw' master UNION view, and is not pulled by Domo directly.-- View: passthrough.musc_orscansinoutraw_v1DROP VIEW IF EXISTS passthrough.musc_orscansinoutraw_v1;CREATE OR REPLACE VIEW passthrough.musc_orscansinoutraw_v1 AS     SELECT            coalesce(hsys.name_,'') AS "HsysName",            coalesce(facility.name_,'') AS "FacilityName",            expanded_data."Category" AS "Category",            expanded_data."ClinicDeptName" AS "ClinicDeptName",            expanded_data."Event" AS "Event",            expanded_data."Event2" AS "Event2",            expanded_data."InvName" AS "InvName",            expanded_data."ItemName" AS "ItemName",            expanded_data."ItemType" AS "ItemType",            expanded_data."locationDesc" AS "locationDesc",            expanded_data."NumInst" AS "NumInst",            expanded_data."Scan_Date" AS "Scan_Date",            expanded_data."Scan_DayName" AS "Scan_DayName",            expanded_data."Scan_DayOfWeek" AS "Scan_DayOfWeek",            expanded_data."Scan_HourBin" AS "Scan_HourBin",            expanded_data."Scan_HourOfDay" AS "Scan_HourOfDay",            expanded_data."Scan_Local" AS "Scan_Local",            expanded_data."ScanDTS" AS "ScanDTS",            expanded_data."scanID" AS "scanID",            expanded_data."scannedAt" AS "scannedAt",            expanded_data."scannedBy" AS "scannedBy",            expanded_data."scannedDesc" AS "scannedDesc",            expanded_data."scannedDTS" AS "scannedDTS",            expanded_data."scannedRecordID" AS "scannedRecordID",            expanded_data."scannedType" AS "scannedType",            expanded_data."SpecialityID" AS "SpecialityID",            expanded_data."Specialty" AS "Specialty",            expanded_data."state" AS "state",            expanded_data."substate" AS "substate",            expanded_data."timezone" AS "timezone"                FROM domo_passthrough  LEFT JOIN facility on (domo_passthrough.facility_id = facility.id)  LEFT JOIN hsys     on (domo_passthrough.hsys_id = hsys.id)CROSS JOIN jsonb_to_recordset(domo_passthrough.data) AS expanded_data (            "Category" citext,            "ClinicDeptName" citext,            "Event" citext,            "Event2" citext,            "InvName" citext,            "ItemName" citext,            "ItemType" citext,            "locationDesc" citext,            "NumInst" int4,            "Scan_Date" date,            "Scan_DayName" citext,            "Scan_DayOfWeek" int4,            "Scan_HourBin" int4,            "Scan_HourOfDay" int4,            "Scan_Local" citext,            "ScanDTS" timestamp,            "scanID" uuid,            "scannedAt" citext,            "scannedBy" citext,            "scannedDesc" citext,            "scannedDTS" timestamp,            "scannedRecordID" uuid,            "scannedType" citext,            "SpecialityID" uuid,            "Specialty" citext,            "state" citext,            "substate" citext,            "timezone" citext)           WHERE dataset_name = 'MUSC_OrScansInOutRaw_PG' AND          view_version = 1; -- Important! The view knows how to parse out JSONB data packed in this way.ALTER TABLE passthrough.musc_orscansinoutraw_v1    OWNER TO user_change_structure;----------------------------------------------- Register view---------------------------------------------CALL view_register ('passthrough','musc_orscansinoutraw_v1','Pulled into ''musc_orscansinoutraw'' master (UNION) view, not pulled directly. ','MUSC_OrScansInOutRaw_PG');