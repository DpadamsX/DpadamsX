-------------------------------------- Define table------------------------------------BEGIN;DROP TABLE IF EXISTS dba.test_result CASCADE;CREATE TABLE IF NOT EXISTS dba.test_result (	id               uuid          NOT NULL DEFAULT extensions.gen_random_uuid(),	test_case_id     uuid          NOT NULL DEFAUlT NULL, -- Need to declare as a FK.    patch_log_id     uuid,         -- Optional.	result_dts       timestamptz   NOT NULL DEFAULT now(), -- The timestamp of the transaction you're in.    test_passed      bool          NOT NULL DEFAULT false,    server_address   citext        NOT NULL DEFAULT inet_server_addr()::citext,    database_name    citext        NOT NULL DEFAULT current_database()::citext,    pg_version       citext        NOT NULL DEFAULT version()::citext,    user_name        user_name     NOT NULL DEFAULT current_user::user_name, -- user_name is a custom domain.    actual_response  citext        NOT NULL DEFAULT '',    actual_error     citext        NOT NULL DEFAULT '',    actual_outcome   test_outcome, -- Custom DOMAIN based on citext that only accepts the values pass, warning, or fail, case-insensitive.    diagnostics      citext        NOT NULL DEFAULT '',    summary          citext        NOT NULL DEFAULT '',    results_json     jsonb         NOT NULL DEFAULT '{}'::jsonb);ALTER TABLE dba.test_result	ADD CONSTRAINT test_result_id_pkey    PRIMARY KEY (id);ALTER TABLE dba.test_result	ADD CONSTRAINT test_result_case_and_user_unique    UNIQUE (test_case_id,user_name);ALTER TABLE dba.test_result	ADD CONSTRAINT test_result_test_case_fk	FOREIGN KEY (test_case_id)	REFERENCES dba.test_case (id)	ON DELETE CASCADE	ON UPDATE NO ACTION;ALTER TABLE dba.test_result	OWNER TO user_change_structure;COMMIT;-------------------------------------- Build indexes-------------------------------------- None needed at the moment.-------------------------------------- Add triggers-------------------------------------- None needed at the moment, but this might change to auto-populate and dirty custom_function.