-------------------------------------- Define text_collection_item table------------------------------------DROP TABLE IF EXISTS ascendco.text_collection_item;CREATE TABLE IF NOT EXISTS ascendco.text_collection_item (	collection_id    uuid        NOT NULL DEFAULT NULL,  -- Shared by all strings in the same collection.	text             citext      NOT NULL DEFAULT '',	source_id        citext      NOT NULL DEFAULT ''); -- Optional. May be a UUID, doesn't have to be.ALTER TABLE ascendco.text_collection_item	SET UNLOGGED;ALTER TABLE ascendco.text_collection_item	ADD CONSTRAINT text_collection_item_pkey    PRIMARY KEY (collection_id,text);ALTER TABLE ascendco.text_collection_item	ADD CONSTRAINT text_collection_item_parent_fkey	FOREIGN KEY (collection_id)	REFERENCES ascendco.text_collection (id)	ON DELETE CASCADE	ON UPDATE NO ACTION;ALTER TABLE ascendco.text_collection_item	OWNER TO user_change_structure;/*This is a good place for a temoprary table, as the cleanup happens automatically when you drop the connection.For now, I want to keep the ability to spot-check the strings while I'm developing. Maybe I'll switch totemporary tables later. For now, I'm going with UNLOGGED as at least it clears out some overhead on INSERTand DELETE, one of the benefits of temporary tables.https://www.depesz.com/2011/01/03/waiting-for-9-1-unlogged-tables/https://blog.nukomeet.com/faster-inserts-how-to-increase-postgresql-write-performance-24d76bd56f75List all unlogged tables within the current database.SELECT relname FROM pg_class WHERE relpersistence = 'u';*/-------------------------------------- Build indexes-------------------------------------- Magic GiST index for K-NN search.-- Note: As of PG 13, you can now set the GiST "signature length" in gist_trgm_ops. The deafult is 12 bytes.-- https://www.postgresql.org/docs/13/pgtrgm.html#id-1.11.7.40.5-- https://postgrespro.co.il/blog/gist-index-and-siglen/CREATE INDEX text_collection_item_text_ix_tgrm_gist	ON ascendco.text_collection_item	USING gist(text COLLATE pg_catalog.default extensions.gist_trgm_ops(siglen=64));-------------------------------------- Add triggers-------------------------------------- Nope, this is pretty much a one-and-done table, don't care about tracking deletes, etc.-------------------------------------- Add GRANTS-------------------------------------- Not normal, jamming these in for my quick tests.GRANT SELECT, INSERT, UPDATE, DELETE ON text_collection_item TO rds_super;GRANT SELECT, INSERT, UPDATE, DELETE ON text_collection_item TO user_reporting;GRANT SELECT, INSERT, UPDATE, DELETE ON text_collection_item TO user_iceberg;GRANT SELECT, INSERT, UPDATE, DELETE ON text_collection_item TO user_change_structure;GRANT SELECT, INSERT, UPDATE, DELETE ON text_collection_item TO user_sonar;