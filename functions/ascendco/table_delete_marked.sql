CREATE OR REPLACE FUNCTION ascendco.table_delete_marked (table_name regclass, out deleted_count int)	RETURNS intAS $BODY$DECLARE	schema_name_text text := (select relnamespace::regnamespace::text							from pg_catalog.pg_class						   where oid = table_name);   table_name_text  text := table_name::text;BEGIN/* Woah! What's happening? EXECUTE? Yes, concatenation is safe here because table_nameis ::regclass, not text. The regclass magic type is designed to be injection proof.For more involved work, see format(), quote_ident(), and commentary/docs on dynamic SQLgenerally. It's all be thought through well. Also seehttps://ascendco.atlassian.net/wiki/spaces/SON/pages/767459342/Deleting+Records+on+Postgres*/	EXECUTE 'delete from ' || schema_name_text || '.' || table_name_text || ' where marked_for_deletion = true;';	GET DIAGNOSTICS deleted_count = ROW_COUNT;END;$BODY$	LANGUAGE plpgsql;ALTER FUNCTION ascendco.table_delete_marked (regclass, out int)	OWNER TO user_bender;