CREATE OR REPLACE FUNCTION ascendco.work_get_source_name (activity_in citext)RETURNS citextLANGUAGE sql IMMUTABLEAS $BODY$SELECTCASE WHEN activity_in =          'Activity'         THEN  'Activity'::citext	 WHEN activity_in =          'Assembly'         THEN  'Assembly'::citext	 WHEN activity_in =          'Collection Inv'   THEN  'CollectionInv'::citext	 WHEN activity_in =          'Sterilize Inv'    THEN  'SterilizerLoad_Inv'::citext -- Catch this first, pattern below would catch it .	 WHEN left(activity_in,9) =  'Sterilize'        THEN  'SterilizerLoad'::citext	 WHEN activity_in =          'Case Cart'        THEN  'Scan'::citext	 WHEN activity_in =          'Decon Receiving'  THEN  'Scan'::citext	 WHEN activity_in =          'Decon Sink'       THEN  'Scan'::citext	 WHEN activity_in =          'Deliver Inv'      THEN  'Scan'::citext	 ELSE                                                 ('Unknown ' || activity_in)::citextEND as source_name_out;$BODY$;COMMENT ON FUNCTION ascendco.work_get_source_name (citext) IS'Translate activity descriptions back to the source IB table. In IB, the activity tags are set in PgIO_Work_xxx_ToObj methods.';ALTER FUNCTION ascendco.work_get_source_name (citext)	OWNER TO user_bender;