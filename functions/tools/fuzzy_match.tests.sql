/*bundle folder: fuzzy_matchBuild date:   2020-05-07T23:33:42ZDescription:  fuzzy_match testsThis script combines the following files into a single transaction:Test setup scripts:fuzzy_match__Bad__Measure__foo_gram__tests.sqlfuzzy_match__Bad__Measure__ngram__tests.sqlfuzzy_match__Bad__Measure__trigram__tests.sqlfuzzy_match__Bad__Measure__winkler_(pass_in_jarowinkler)__tests.sqlfuzzy_match__Bad__neighbor_similarity_threshold_min_<_0__tests.sqlfuzzy_match__Bad__neighbor_similarity_threshold_min_>_1__tests.sqlfuzzy_match__Bad__neighbors_to_check_max_<_1__tests.sqlfuzzy_match__Bad__result_rows_max_<_1__tests.sqlfuzzy_match__Bad__text_collection_ID_not_found__tests.sqlfuzzy_match__Good__Measure__jaro__tests.sqlfuzzy_match__Good__Measure__jarowinkler__tests.sqlfuzzy_match__Good__Measure__qgram__tests.sql*/BEGIN;-- fuzzy_match__Bad__Measure__foo_gram__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Bad: Measure: foo_gram', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,      5,   ''foo_gram'',    0.2,    5);', '', 'Error: KC300, ERROR:  Invalid distance measure name ''foo_gram''HINT:  Valid methods are jaro, jarowinkler, and qgramCONTEXT:  PL/pgSQL function fuzzy_match(citext,uuid,integer,citext,real,integer) line 153 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match__Bad__Measure__ngram__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Bad: Measure: ngram', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,     5,   ''ngram'',    0.2,    5);', '', 'Error: KC300, ERROR:  Invalid distance measure name ''ngram''HINT:  Valid methods are jaro, jarowinkler, and qgramCONTEXT:  PL/pgSQL function fuzzy_match(citext,uuid,integer,citext,real,integer) line 153 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match__Bad__Measure__trigram__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Bad: Measure: trigram', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,     5,   ''trigram'',    0.2,    5);', '', 'Error: KC300, ERROR:  Invalid distance measure name ''trigram''HINT:  Valid methods are jaro, jarowinkler, and qgramCONTEXT:  PL/pgSQL function fuzzy_match(citext,uuid,integer,citext,real,integer) line 153 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match__Bad__Measure__winkler_(pass_in_jarowinkler)__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Bad: Measure: winkler (pass in jarowinkler)', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,     5,   ''winkler'',    0.2,    5);', '', 'Error: KC300, ERROR:  Invalid distance measure name ''winkler''HINT:  Valid methods are jaro, jarowinkler, and qgramCONTEXT:  PL/pgSQL function fuzzy_match(citext,uuid,integer,citext,real,integer) line 153 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match__Bad__neighbor_similarity_threshold_min_<_0__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Bad: neighbor_similarity_threshold_min < 0', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,     5,   ''jarowinkler'',    -.1,    5);', '', 'Error: KC202, ERROR:  neighbor_qgram_threshold_min value is out of range.HINT:  Value must be in the range 0-1.CONTEXT:  PL/pgSQL function fuzzy_match(citext,uuid,integer,citext,real,integer) line 177 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match__Bad__neighbor_similarity_threshold_min_>_1__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Bad: neighbor_similarity_threshold_min > 1', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,     5,   ''jarowinkler'',    1.000001,    5);', '', 'Error: KC202, ERROR:  neighbor_qgram_threshold_min value is out of range.HINT:  Value must be in the range 0-1.CONTEXT:  PL/pgSQL function fuzzy_match(citext,uuid,integer,citext,real,integer) line 177 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match__Bad__neighbors_to_check_max_<_1__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Bad: neighbors_to_check_max < 1', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,     0,   ''jarowinkler'',    0.2,    5);', '', 'Error: KC200, ERROR:  neighbors_to_check_max value is too low.HINT:  Value must be 1 or higher.CONTEXT:  PL/pgSQL function fuzzy_match(citext,uuid,integer,citext,real,integer) line 163 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match__Bad__result_rows_max_<_1__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Bad: result_rows_max < 1', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,     5,    ''jarowinkler'',    0.2,    0);', '', 'Error: KC200, ERROR:  result_rows_max value is too low.HINT:  Value must be 1 or higher.CONTEXT:  PL/pgSQL function fuzzy_match(citext,uuid,integer,citext,real,integer) line 170 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match__Bad__text_collection_ID_not_found__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Bad: text_collection ID not found', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''00000000-0000-0000-0000-000000000000'' ,      5,   ''jaro'',    0.2,    5);', '', 'Error: KC100, ERROR:  text_collection not found with id = ''00000000-0000-0000-0000-000000000000''CONTEXT:  PL/pgSQL function fuzzy_match(citext,uuid,integer,citext,real,integer) line 143 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match__Good__Measure__jaro__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Good: Measure: jaro', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,     5,   ''jaro'',    0.2,    5);', '1 West Adult Finochietto Ret.	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	1	4	0.752898	avg_quadratic	0.566855	0.752898	0	0.637419	0.637419	0.541111	0.735603	0.474576	0.3751 West Adult Finochietto Ret.	Tray Cardio Adult Morse Retractor	57762325DA06004D8083110C0277F90C	3	4	0.747769	monge_elkan_quadratic	0.482574	0.694676	0	0.603292	0.603292	0.559158	0.747769	0.212121	0.1698111 West Adult Finochietto Ret.	Tray Cardio Small Finochetti Retractor	D0EACA378733BF4BBE2391D3B262928A	2	4	0.746011	monge_elkan_quadratic	0.515463	0.717957	0	0.694722	0.694722	0.556532	0.746011	0.225352	0.1754391 West Adult Finochietto Ret.	Tray Cardio Adult Rultract Retractor	357F9FDC7042FD4B907F4946A04F5BEE	4	4	0.741393	monge_elkan_quadratic	0.480019	0.692834	0	0.604843	0.604843	0.549663	0.741393	0.202899	0.176471', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match__Good__Measure__jarowinkler__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Good: Measure: jarowinkler', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,     5,   ''jarowinkler'',    0.2,    5);', '1 West Adult Finochietto Ret.	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	1	4	0.752898	avg_quadratic	0.566855	0.752898	0	0.637419	0.637419	0.541111	0.735603	0.474576	0.3751 West Adult Finochietto Ret.	Tray Cardio Small Finochetti Retractor	D0EACA378733BF4BBE2391D3B262928A	2	4	0.749415	monge_elkan_quadratic	0.516879	0.718943	0	0.694722	0.694722	0.561623	0.749415	0.225352	0.1754391 West Adult Finochietto Ret.	Tray Cardio Adult Morse Retractor	57762325DA06004D8083110C0277F90C	3	4	0.747769	monge_elkan_quadratic	0.482574	0.694676	0	0.603292	0.603292	0.559158	0.747769	0.212121	0.1698111 West Adult Finochietto Ret.	Tray Cardio Adult Rultract Retractor	357F9FDC7042FD4B907F4946A04F5BEE	4	4	0.741393	monge_elkan_quadratic	0.480019	0.692834	0	0.604843	0.604843	0.549663	0.741393	0.202899	0.176471', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match__Good__Measure__qgram__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match', '(citext, uuid, int4, citext, float4, int4)', 'fuzzy_match: Good: Measure: qgram', 'select * from fuzzy_match (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,     5,   ''qgram'',    0.2,    5);', '1 West Adult Finochietto Ret.	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	1	4	0.697039	avg_quadratic	0.485864	0.697039	0	0.637419	0.637419	0.270588	0.520181	0.474576	0.3751 West Adult Finochietto Ret.	Tray Cardio Small Finochetti Retractor	D0EACA378733BF4BBE2391D3B262928A	2	4	0.694722	jaro	0.400021	0.632472	0	0.694722	0.694722	0.182588	0.427303	0.225352	0.1754391 West Adult Finochietto Ret.	Tray Cardio Adult Rultract Retractor	357F9FDC7042FD4B907F4946A04F5BEE	4	4	0.642327	avg_quadratic	0.412584	0.642327	0	0.604843	0.604843	0.320405	0.566043	0.202899	0.1764711 West Adult Finochietto Ret.	Tray Cardio Adult Morse Retractor	57762325DA06004D8083110C0277F90C	3	4	0.642257	avg_quadratic	0.412494	0.642257	0	0.603292	0.603292	0.320405	0.566043	0.212121	0.169811', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');COMMIT;