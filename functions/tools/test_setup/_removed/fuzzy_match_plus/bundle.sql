/*bundle folder: fuzzy_match_plusBuild date:   2020-05-04T10:40:11ZDescription:  fuzzy_match_plus testsThis script combines the following files into a single transaction:Test setup scripts:fuzzy_match_plus__Bad__Measure__ngram__tests.sqlfuzzy_match_plus__Bad__Measure__trigram__tests.sqlfuzzy_match_plus__Bad__Measure__winkler_(pass_in_jarowinkler)__tests.sqlfuzzy_match_plus__Bad__neighbor_similarity_threshold_min_<_0__tests.sqlfuzzy_match_plus__Bad__neighbor_similarity_threshold_min_>_1__tests.sqlfuzzy_match_plus__Bad__neighbors_to_check_max_<_1__tests.sqlfuzzy_match_plus__Bad__Pick_by__foo_score__tests.sqlfuzzy_match_plus__Bad__result_rows_max_<_1__tests.sqlfuzzy_match_plus__Bad__text_collection_ID_not_found__tests.sqlfuzzy_match_plus__Good__Measure__jaro__tests.sqlfuzzy_match_plus__Good__Measure__jarowinkler__tests.sqlfuzzy_match_plus__Good__Measure__qgram__tests.sqlfuzzy_match_plus__Good__Pick_by__average_score__tests.sqlfuzzy_match_plus__Good__Pick_by__best_score__tests.sqlfuzzy_match_plus__Good__Pick_by__distance_score__tests.sqlfuzzy_match_plus__Good__Pick_by__monge_elkan_quadratic_score__tests.sqlfuzzy_match_plus__Good__Pick_by__monge_elkan_score__tests.sqlfuzzy_match_plus__Good__Pick_by__qgram_score__tests.sql*/BEGIN;-- fuzzy_match_plus__Bad__Measure__ngram__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Bad: Measure: ngram', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''best_score'',   ''ngram'',    5,    0.2,    5);', '', 'Error: KC100, ERROR:  Invalid distance measure name ''ngram''HINT:  Valid methods are jaro, jarowinkler, and qgramCONTEXT:  PL/pgSQL function fuzzy_match_plus(citext,uuid,citext,citext,integer,real,integer) line 146 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Bad__Measure__trigram__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Bad: Measure: trigram', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''best_score'',   ''trigram'',    5,    0.2,    5);', '', 'Error: KC100, ERROR:  Invalid distance measure name ''trigram''HINT:  Valid methods are jaro, jarowinkler, and qgramCONTEXT:  PL/pgSQL function fuzzy_match_plus(citext,uuid,citext,citext,integer,real,integer) line 146 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Bad__Measure__winkler_(pass_in_jarowinkler)__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Bad: Measure: winkler (pass in jarowinkler)', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''best_score'',   ''winkler'',    5,    0.2,    5);', '', 'Error: KC100, ERROR:  Invalid distance measure name ''winkler''HINT:  Valid methods are jaro, jarowinkler, and qgramCONTEXT:  PL/pgSQL function fuzzy_match_plus(citext,uuid,citext,citext,integer,real,integer) line 146 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Bad__neighbor_similarity_threshold_min_<_0__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Bad: neighbor_similarity_threshold_min < 0', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''best_score'',   ''jarowinkler'',    5,    -.1,    5);', '', 'Error: KC202, ERROR:  neighbor_similarity_threshold_min value is out of range.HINT:  Value must be in the range 0-1.CONTEXT:  PL/pgSQL function fuzzy_match_plus(citext,uuid,citext,citext,integer,real,integer) line 178 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Bad__neighbor_similarity_threshold_min_>_1__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Bad: neighbor_similarity_threshold_min > 1', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''best_score'',   ''jarowinkler'',    5,    1.000001,    5);', '', 'Error: KC202, ERROR:  neighbor_similarity_threshold_min value is out of range.HINT:  Value must be in the range 0-1.CONTEXT:  PL/pgSQL function fuzzy_match_plus(citext,uuid,citext,citext,integer,real,integer) line 178 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Bad__neighbors_to_check_max_<_1__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Bad: neighbors_to_check_max < 1', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''best_score'',   ''jarowinkler'',    0,    0.2,    5);', '', 'Error: KC200, ERROR:  neighbors_to_check_max value is too low.HINT:  Value must be 1 or higher.CONTEXT:  PL/pgSQL function fuzzy_match_plus(citext,uuid,citext,citext,integer,real,integer) line 164 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Bad__Pick_by__foo_score__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Bad: Pick by: foo_score', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''foo_column'',   ''jaro'',    5,    0.2,    5);', '', 'Error: KC100, ERROR:  Invalid winning column name ''foo_column''HINT:  Valid names are  average_score, best_score, distance_score, monge_elkan_score, monge_elkan_quadratic_score, qgram_score, and trigram_score.CONTEXT:  PL/pgSQL function fuzzy_match_plus(citext,uuid,citext,citext,integer,real,integer) line 155 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Bad__result_rows_max_<_1__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Bad: result_rows_max < 1', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''best_score'',   ''jarowinkler'',    5,    0.2,    0);', '', 'Error: KC200, ERROR:  result_rows_max value is too low.HINT:  Value must be 1 or higher.CONTEXT:  PL/pgSQL function fuzzy_match_plus(citext,uuid,citext,citext,integer,real,integer) line 171 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Bad__text_collection_ID_not_found__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Bad: text_collection ID not found', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''00000000-0000-0000-0000-000000000000'' ,    ''best_score'',   ''jaro'',    5,    0.2,    5);', '', 'Error: KC100, ERROR:  text_collection not found with id = ''00000000-0000-0000-0000-000000000000''CONTEXT:  PL/pgSQL function fuzzy_match_plus(citext,uuid,citext,citext,integer,real,integer) line 135 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Good__Measure__jaro__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Good: Measure: jaro', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''best_score'',   ''jaro'',    5,    0.2,    5);', '1	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	Tray Finochietto Retractor	0.375	0.474576	0.637419	0.541111	0.735603	0.735603	0.634783	monge_elkan_quadratic', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Good__Measure__jarowinkler__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Good: Measure: jarowinkler', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''best_score'',   ''jarowinkler'',    5,    0.2,    5);', '1	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	Tray Finochietto Retractor	0.375	0.474576	0.637419	0.541111	0.735603	0.735603	0.634783	monge_elkan_quadratic', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Good__Measure__qgram__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Good: Measure: qgram', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''best_score'',   ''qgram'',    5,    0.2,    5);', '1	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	Tray Finochietto Retractor	0.375	0.474576	0.474576	0.541111	0.735603	0.735603	0.594072	monge_elkan_quadratic', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Good__Pick_by__average_score__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Good: Pick by: average_score', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''average_score'',   ''jarowinkler'',    5,    0.2,    5);', '1	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	Tray Finochietto Retractor	0.375	0.474576	0.637419	0.541111	0.735603	0.735603	0.634783	monge_elkan_quadratic', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Good__Pick_by__best_score__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Good: Pick by: best_score', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''best_score'',   ''jarowinkler'',    5,    0.2,    5);', '1	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	Tray Finochietto Retractor	0.375	0.474576	0.637419	0.541111	0.735603	0.735603	0.634783	monge_elkan_quadratic', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Good__Pick_by__distance_score__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Good: Pick by: distance_score', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''monge_elkan_score'',   ''jarowinkler'',    5,    0.2,    5);', '1	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	Tray Finochietto Retractor	0.375	0.474576	0.637419	0.541111	0.735603	0.735603	0.634783	monge_elkan_quadratic', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Good__Pick_by__monge_elkan_quadratic_score__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Good: Pick by: monge_elkan_quadratic_score', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''monge_elkan_quadratic_score'',   ''jarowinkler'',    5,    0.2,    5);', '1	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	Tray Finochietto Retractor	0.375	0.474576	0.637419	0.541111	0.735603	0.735603	0.634783	monge_elkan_quadratic', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Good__Pick_by__monge_elkan_score__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Good: Pick by: monge_elkan_score', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''monge_elkan_score'',   ''jarowinkler'',    5,    0.2,    5);', '1	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	Tray Finochietto Retractor	0.375	0.474576	0.637419	0.541111	0.735603	0.735603	0.634783	monge_elkan_quadratic', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_match_plus__Good__Pick_by__qgram_score__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_match_plus', '(citext, uuid, citext, citext, int4, float4, int4)', 'fuzzy_match_plus: Good: Pick by: qgram_score', 'select * from fuzzy_match_plus (   ''1 West Adult Finochietto Ret.'',   ''f00b4e79-880d-4efc-baa1-9f258e20ca7e'' ,    ''monge_elkan_score'',   ''jarowinkler'',    5,    0.2,    5);', '1	Tray Finochietto Retractor	A9CBAF086996E44CA744C297E115EC1C	Tray Finochietto Retractor	0.375	0.474576	0.637419	0.541111	0.735603	0.735603	0.634783	monge_elkan_quadratic', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');COMMIT;