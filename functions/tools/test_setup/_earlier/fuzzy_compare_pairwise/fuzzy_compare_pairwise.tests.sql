/*bundle folder: fuzzy_compare_pairwiseBuild date:   2020-05-11T23:58:07ZDescription:  fuzzy_compare_pairwise testsThis script combines the following files into a single transaction:Test setup scripts:fuzzy_compare_pairwise__Bad__Handicap_too_high__tests.sqlfuzzy_compare_pairwise__Bad__Handicap_too_low__tests.sqlfuzzy_compare_pairwise__Bad__Malformed_JSON_(missing_comma)__tests.sqlfuzzy_compare_pairwise__Bad__Method_winkler__tests.sqlfuzzy_compare_pairwise__Good__Defaults__tests.sqlfuzzy_compare_pairwise__Good__Handicap_set__tests.sqlfuzzy_compare_pairwise__Good__Method_jaro__tests.sqlfuzzy_compare_pairwise__Good__Method_jarowinkler__tests.sqlfuzzy_compare_pairwise__Good__Method_qgram__tests.sql*/BEGIN;-- fuzzy_compare_pairwise__Bad__Handicap_too_high__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_compare_pairwise', '(jsonb, jsonb, real, citext)', 'fuzzy_compare_pairwise: Bad: Handicap too high', 'select *  from fuzzy_compare_pairwise(''[	{"text":"Fuzzy Green Bunny","id":"1"},	{"text":"Small Red Squirrel","id":"2"} ]'',''[	{"text":"Red Large Special","id":"3"},	{"text":"Blue Small","id":"4"},	{"text":"Green Medium Special","id":"5"} ]'', 2);', '', 'Error: KC202, ERROR:  handicap_factor value is out of range.HINT:  Value must be in the range 0-1.CONTEXT:  PL/pgSQL function fuzzy_compare_pairwise(jsonb,jsonb,real,citext) line 20 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_compare_pairwise__Bad__Handicap_too_low__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_compare_pairwise', '(jsonb, jsonb, real, citext)', 'fuzzy_compare_pairwise: Bad: Handicap too low', 'select *  from fuzzy_compare_pairwise(''[	{"text":"Fuzzy Green Bunny","id":"1"},	{"text":"Small Red Squirrel","id":"2"} ]'',''[	{"text":"Red Large Special","id":"3"},	{"text":"Blue Small","id":"4"},	{"text":"Green Medium Special","id":"5"} ]'', -1);', '', 'Error: KC202, ERROR:  handicap_factor value is out of range.HINT:  Value must be in the range 0-1.CONTEXT:  PL/pgSQL function fuzzy_compare_pairwise(jsonb,jsonb,real,citext) line 20 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_compare_pairwise__Bad__Malformed_JSON_(missing_comma)__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_compare_pairwise', '(jsonb, jsonb, real, citext)', 'fuzzy_compare_pairwise: Bad: Malformed JSON (missing comma)', 'select *  from fuzzy_compare_pairwise(''[	{"text":"Fuzzy Green Bunny","id":"1"},	{"text":"Small Red Squirrel","id":"2"} ]'',''[	{"text":"Red Large Special","id":"3"},	{"text":"Blue Small","id":"4"}	{"text":"Green Medium Special","id":"5"} ]'', );', '', 'Error: 42601, ERROR:  syntax error at or near ")"LINE 12: );         ^', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_compare_pairwise__Bad__Method_winkler__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_compare_pairwise', '(jsonb, jsonb, real, citext)', 'fuzzy_compare_pairwise: Bad: Method winkler', 'select *  from fuzzy_compare_pairwise(''[	{"text":"Fuzzy Green Bunny","id":"1"},	{"text":"Small Red Squirrel","id":"2"} ]'',''[	{"text":"Red Large Special","id":"3"},	{"text":"Blue Small","id":"4"},	{"text":"Green Medium Special","id":"5"} ]'', 0.3,''winkler'')', '', 'Error: KC300, ERROR:  Invalid distance measure name winklerHINT:  Valid methods are jaro, jarowinkler, and qgramCONTEXT:  PL/pgSQL function fuzzy_compare_pairwise(jsonb,jsonb,real,citext) line 10 at RAISE', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_compare_pairwise__Good__Defaults__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_compare_pairwise', '(jsonb, jsonb, real, citext)', 'fuzzy_compare_pairwise: Good: Defaults', 'select *  from fuzzy_compare_pairwise(''[	{"text":"Fuzzy Green Bunny","id":"1"},	{"text":"Small Red Squirrel","id":"2"} ]'',''[	{"text":"Red Large Special","id":"3"},	{"text":"Blue Small","id":"4"},	{"text":"Green Medium Special","id":"5"} ]'');', 'Fuzzy Green Bunny	Red Large Special	1	3	0.479197	monge_elkan_quadratic	0.239151	0.489031	0	0	0.457516	0.457516	0.058824	0.22963	0.479197	0.22963	0.479197	0	0	0Small Red Squirrel	Blue Small	2	4	0.726483	monge_elkan_quadratic	0.48518	0.696549	0.26087	0	0.623148	0.623148	0.277778	0.527778	0.726483	0.452778	0.651483	0.375	0.26087	0.333333', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_compare_pairwise__Good__Handicap_set__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_compare_pairwise', '(jsonb, jsonb, real, citext)', 'fuzzy_compare_pairwise: Good: Handicap set', 'select *  from fuzzy_compare_pairwise(''[	{"text":"Fuzzy Green Bunny","id":"1"},	{"text":"Small Red Squirrel","id":"2"} ]'',''[	{"text":"Red Large Special","id":"3"},	{"text":"Blue Small","id":"4"},	{"text":"Green Medium Special","id":"5"} ]'', 0.3);', 'Fuzzy Green Bunny	Red Large Special	1	3	0.479197	monge_elkan_quadratic	0.239151	0.489031	0	0	0.457516	0.457516	0.058824	0.22963	0.479197	0.22963	0.479197	0	0	0Small Red Squirrel	Blue Small	2	4	0.726483	monge_elkan_quadratic	0.48518	0.696549	0.26087	0	0.623148	0.623148	0.277778	0.527778	0.726483	0.452778	0.651483	0.375	0.26087	0.333333', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_compare_pairwise__Good__Method_jaro__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_compare_pairwise', '(jsonb, jsonb, real, citext)', 'fuzzy_compare_pairwise: Good: Method jaro', 'select *  from fuzzy_compare_pairwise(''[	{"text":"Fuzzy Green Bunny","id":"1"},	{"text":"Small Red Squirrel","id":"2"} ]'',''[	{"text":"Red Large Special","id":"3"},	{"text":"Blue Small","id":"4"},	{"text":"Green Medium Special","id":"5"} ]'', 0.3,''jaro'');', 'Fuzzy Green Bunny	Red Large Special	1	3	0.479197	monge_elkan_quadratic	0.239151	0.489031	0	0	0.457516	0.457516	0.058824	0.22963	0.479197	0.22963	0.479197	0	0	0Small Red Squirrel	Blue Small	2	4	0.726483	monge_elkan_quadratic	0.48518	0.696549	0.26087	0	0.623148	0.623148	0.277778	0.527778	0.726483	0.452778	0.651483	0.375	0.26087	0.333333', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_compare_pairwise__Good__Method_jarowinkler__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_compare_pairwise', '(jsonb, jsonb, real, citext)', 'fuzzy_compare_pairwise: Good: Method jarowinkler', 'select *  from fuzzy_compare_pairwise(''[	{"text":"Fuzzy Green Bunny","id":"1"},	{"text":"Small Red Squirrel","id":"2"} ]'',''[	{"text":"Red Large Special","id":"3"},	{"text":"Blue Small","id":"4"},	{"text":"Green Medium Special","id":"5"} ]'', 0.3,''jaro'');', 'Fuzzy Green Bunny	Red Large Special	1	3	0.479197	monge_elkan_quadratic	0.239151	0.489031	0	0	0.457516	0.457516	0.058824	0.22963	0.479197	0.22963	0.479197	0	0	0Small Red Squirrel	Blue Small	2	4	0.726483	monge_elkan_quadratic	0.48518	0.696549	0.26087	0	0.623148	0.623148	0.277778	0.527778	0.726483	0.452778	0.651483	0.375	0.26087	0.333333', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');-- fuzzy_compare_pairwise__Good__Method_qgram__tests.sqlselect * from test_case_setup('Function', 'ascendco', 'fuzzy_compare_pairwise', '(jsonb, jsonb, real, citext)', 'fuzzy_compare_pairwise: Good: Method qgram', 'select *  from fuzzy_compare_pairwise(''[	{"text":"Fuzzy Green Bunny","id":"1"},	{"text":"Small Red Squirrel","id":"2"} ]'',''[	{"text":"Red Large Special","id":"3"},	{"text":"Blue Small","id":"4"},	{"text":"Green Medium Special","id":"5"} ]'', 0.3,''qgram'');', 'Fuzzy Green Bunny	Red Large Special	1	3	0.457516	jaro	0.097386	0.312067	0	0	0.457516	0.457516	0.058824	0	0	0	0	0	0	0Small Red Squirrel	Blue Small	2	4	0.641689	monge_elkan_quadratic	0.445019	0.667097	0.26087	0	0.623148	0.623148	0.277778	0.411765	0.641689	0.336765	0.566689	0.375	0.26087	0.333333', '', 'text', '{"comparator":"equals","column_order":"Ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure, user_iceberg}', FALSE, TRUE, '', '');COMMIT;