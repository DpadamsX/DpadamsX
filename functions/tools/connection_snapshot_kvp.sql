CREATE OR REPLACE FUNCTION tools.connection_snapshot_kvp()  RETURNS TABLE(  	setting_name text,   	setting_value text)   	AS $BODY$DECLARE	search_path text;	BEGIN	 	 SELECT setting FROM pg_settings WHERE name='search_path' INTO search_path;	 SELECT 'user_name',current_user INTO setting_name,setting_value;				RETURN NEXT;	 SELECT 'session_user_name',session_user INTO setting_name,setting_value;		RETURN NEXT;	 SELECT 'role_nane',current_role INTO setting_name,setting_value;				RETURN NEXT;	 SELECT 'database_name',current_database() INTO setting_name,setting_value;		RETURN NEXT;	 SELECT 'server_version',version() INTO setting_name,setting_value;				RETURN NEXT;	 SELECT 'search_path',search_path INTO setting_name,setting_value;				RETURN NEXT;	 SELECT 'inet_client_addr',inet_client_addr() INTO setting_name,setting_value;	RETURN NEXT;	 SELECT 'inet_client_port',inet_client_port() INTO setting_name,setting_value;	RETURN NEXT;	 SELECT 'inet_server_addr',inet_server_addr() INTO setting_name,setting_value;	RETURN NEXT;	 SELECT 'inet_server_port',inet_server_port() INTO setting_name,setting_value;	RETURN NEXT;	 SELECT 'query',current_query() INTO setting_name,setting_value;				RETURN NEXT;END$BODY$  LANGUAGE plpgsql VOLATILE  COST 100  ROWS 1000;  ALTER FUNCTION tools.connection_snapshot_kvp ()	OWNER TO user_bender;