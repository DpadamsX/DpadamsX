CREATE OR REPLACE FUNCTION tools.connection_snapshot() 	RETURNS TABLE(		user_name text, 		session_user_name text,		role_nane text,		database_name text,		server_version text,		search_path text,		inet_client_addr inet,		inet_client_port integer,		inet_server_addr inet,		inet_server_port integer,		query text)AS $BODY$ BEGIN	 user_name := current_user;	 session_user_name := session_user;	 role_nane := current_role;	 database_name := current_database();	 server_version := version();	 	 SELECT setting FROM pg_settings WHERE name='search_path' INTO search_path;	 inet_client_addr := inet_client_addr();	 inet_client_port := inet_client_port();	 inet_server_addr := inet_server_addr();	 inet_server_port := inet_server_port();		 query := current_query();		 RETURN NEXT;END$BODY$  LANGUAGE plpgsql;ALTER FUNCTION tools.connection_snapshot() 	OWNER TO user_bender;