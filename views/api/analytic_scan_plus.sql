CREATE OR REPLACE VIEW api.analytic_scan_plus ASSELECT 	analytic_scan.id,    analytic_scan.pg_con_id,    analytic_scan.marked_for_deletion,    analytic_scan.hsys_id,    analytic_scan.facility_id,    analytic_scan.facility_location_id,    analytic_scan.location_description,    analytic_scan.specialty_id,    analytic_scan.scanned_type,    analytic_scan.associated_to,    analytic_scan.user_name,    analytic_scan.inv_name,    greatest (1,analytic_scan.num_inst) AS num_inst, -- Assumes no negative numbers, turns 0 values into 1.    analytic_scan.tray_or_pack,    analytic_scan.item_name,    analytic_scan.scan_time_utc_dts,    analytic_scan.scan_time_local_dts,    /* Lookup fields */    hsys.name_ AS hsys_name,    facility.name_ AS facility_name,    facility.tz_name,	facility_location.name_ AS Location_name,    specialty.name_ AS specialty_name,    data_file_info.server_name_	FROM analytic_scan	LEFT JOIN hsys 				ON (analytic_scan.hsys_id 				= hsys.id)	LEFT JOIN facility		 	ON (analytic_scan.facility_id 			= facility.id)	LEFT JOIN facility_location 	ON (analytic_scan.facility_location_id = facility_location.id)	LEFT JOIN specialty	 		ON (analytic_scan.specialty_id		  	= specialty.id)	LEFT JOIN data_file_info   	ON (analytic_scan.data_file_id	 	 	= data_file_info.id)    ;ALTER VIEW api.analytic_scan_plus    OWNER TO user_change_structure;-------------------------------------------------- Register view------------------------------------------------CALL view_register ('api','analytic_scan_plus','Analytic data, dervied largely from [Scan]');