DROP VIEW IF EXISTS ascendco.facility_plus;CREATE OR REPLACE VIEW ascendco.facility_plus ASSELECT	f.id,	    coalesce (hsys.name_, '')                                   AS hsys_name,		f.name_,		coalesce (spd_facility.name_,'')                            AS default_spd_facility,        f.tz_name                                                   AS tz_name_ib,        convert_ib_timezone_name(f.tz_name)                         AS tz_name_postgres,        coalesce (calendar.calendar_name, '')                       AS calendar_name,		f.marked_for_deletion, 		form_template_get_name (f.production_label_form_id)        AS production_label, 		form_template_get_name (f.permanent_label_form_id)         AS permanent_label, 		form_template_get_name (f.missing_inst_label_form_id)      AS missing_inst_label, 		form_template_get_name (f.facility_location_label_form_id) AS facility_location_label, 		form_template_get_name (f.sterilizer_label_form_id)        AS sterilizer_label, 		form_template_get_name (f.user_badge_label_form_id)        AS user_badge_label, 		form_template_get_name (f.workstation_label_form_id)       AS workstation_label,		f.created_dts,		f.updated_dts,		f.sonar_auto_logout_minutes,		f.sonar_auto_logout_dialog_minutes,		f.num_ors,		f.sonar_go_live_date,		f.is_count_sheet_source_truth,		f.hide_doc_names_for_stats,		f.is_item_master_live,		f.is_sonar_live,		f.sterilizer_print_at_sterilizing,		f.sterilizer_print_at_cooling,		f.sterilizer_print_at_released,		f.can_set_all_found_in_assembly,		f.their_id,		f.created_by,		f.updated_by,		f.reporting_name,		f.label_name,		f.sonar_name_full,		f.sonar_count_sheet_form_name,		f.sterilize_alert_level,		f.sonar_scanner_stop_char,		f.emr_location_name	     FROM facility f	LEFT JOIN hsys 		ON (f.hsys_id      =  hsys.id)	LEFT JOIN calendar	ON (f.calendar_id  =  calendar.id) -- SELF JOIN to get the name of the related default SPD facility, if there is one.    LEFT JOIN facility spd_facility ON (spd_facility.id =  f.default_spd_facility_id);ALTER VIEW ascendco.facility_plus    OWNER TO user_change_structure;----------------------------------------------- Register view---------------------------------------------CALL view_register ('ascendco','facility_plus','facility data, with lookup values');