/* The Domo SELECT for this is:SELECT * from sonar_backlog_v1;If you have mutiple version for this DataSet in the domo_passthrough table at once,then the Domo SELECT needs to use UNION to combine the results.*/-- View: passthrough.sonar_backlog_v1DROP VIEW IF EXISTS passthrough.sonar_backlog_v1;CREATE OR REPLACE VIEW passthrough.sonar_backlog_v1 AS     SELECT             coalesce(hsys.name_,'') as "HsysName",            coalesce(facility.name_,'') as "FacilityName",            expanded_data."Backlog" AS "Backlog",            expanded_data."Backlog_Date" AS "Backlog_Date",            expanded_data."Backlog_DayName" AS "Backlog_DayName",            expanded_data."Backlog_DayOfWeek" AS "Backlog_DayOfWeek",            expanded_data."Backlog_HourBin" AS "Backlog_HourBin",            expanded_data."Backlog_HourOfDay" AS "Backlog_HourOfDay",            expanded_data."Backlog_Local" AS "Backlog_Local",            expanded_data."BacklogDTS" AS "BacklogDTS",            expanded_data."DateAndHour" AS "DateAndHour",            expanded_data."DateTime" AS "DateTime",            expanded_data."FacilityID" AS "FacilityID",            expanded_data."HsysID" AS "HsysID",            expanded_data."InstBacklog" AS "InstBacklog"                FROM domo_passthrough  LEFT JOIN facility on (domo_passthrough.facility_id = facility.id)  LEFT JOIN hsys     on (domo_passthrough.hsys_id = hsys.id)CROSS JOIN jsonb_to_recordset(domo_passthrough.data) as expanded_data (            "Backlog" int4,            "Backlog_Date" timestamp,            "Backlog_DayName" citext,            "Backlog_DayOfWeek" int4,            "Backlog_HourBin" int4,            "Backlog_HourOfDay" int4,            "Backlog_Local" timestamp,            "BacklogDTS" timestamp,            "DateAndHour" citext,            "DateTime" timestamp,            "FacilityID" uuid,            "HsysID" uuid,            "InstBacklog" int4)           WHERE dataset_name = 'Sonar_BackLog_PG' AND          view_version = 1; -- Important! The view knows how to parse out JSONB data packed in this way.ALTER TABLE passthrough.sonar_backlog_v1    OWNER TO user_change_structure;    -----------------------------------------------Register view---------------------------------------------CALL view_register ('passthrough','sonar_backlog_v1','','Sonar_BackLog_PG');