------------------------------------------------------------------------------------- Checks for api.push_log_count_since (since_dts timestamp with time zone) function------------------------------------------------------------------------------------- Existence check:select * from test_case_setup('Function', 'api', 'push_log_count_since (since_dts timestamp with time zone)', '()', 'api.push_log_count_since since_dts timestamp with time zone existence check', 'select count(*) from pg_proc where pronamespace::regnamespace::text = ''api''   and proname = ''push_log_count_since''   and pg_get_function_identity_arguments(oid) = ''since_dts timestamp with time zone'';', '1', '', 'text', '{"comparator":"equals","column_order":"ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure}', FALSE, FALSE, '', '');-- Definition check:select * from test_case_setup('Function', 'api', 'push_log_count_since (since_dts timestamp with time zone)', '()', 'api.push_log_count_since since_dts timestamp with time zone definition check', 'select pg_get_functiondef(oid) from pg_proc where pronamespace::regnamespace::text = ''api''   and proname = ''push_log_count_since''   and pg_get_function_identity_arguments(oid) = ''since_dts timestamp with time zone'';', 'CREATE OR REPLACE FUNCTION api.push_log_count_since(since_dts timestamp with time zone) RETURNS TABLE(days_ago bigint, table_name citext, server_name citext, push_count bigint) LANGUAGE plpgsql STABLE SECURITY DEFINERAS $function$DECLARE-- Subtract two timestamptz values, get an interval, pull out just the days.   days_ago bigint := date_part(''day'', now()::timestamptz - since_dts)::bigint;BEGINRETURN QUERY    SELECT days_ago,           ib_table_name as table_name,           data_file_info.server_name_ as server_name,           count(*) as push_count      FROM ascendco.push_log      JOIN ascendco.data_file_info on (data_file_info.id = push_log.data_file_id)     WHERE push_log.push_dts >= since_dts  GROUP BY ib_table_name,           data_file_info.server_name_  ORDER BY ib_table_name,           data_file_info.server_name_           ;END;$function$', '', 'text', '{"comparator":"equals","column_order":"ignore","case_sensitivity":"blind","whitespace_cleaning":"all","normalize_line_endings":true}', 'Pass', '{user_change_structure}', FALSE, FALSE, '', '');